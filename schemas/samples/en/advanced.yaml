# TaskPilot - Full Features Sample
# Demo of all features: parallel, actions (sequential), ref, etc.
# Generated from types.ts (SSoT)

version: "1.0"

commands:
  build:
    type: terminal
    command: npm run build
    description: Build the project
  test:
    type: terminal
    command: npm test
    description: Run tests
  lint:
    type: terminal
    command: npm run lint
    description: Run lint check
  start:
    type: terminal
    command: npm start
    description: Start development server
    terminal: server

menu:
  - label: Development
    icon: "$(tools)"
    description: Development commands
    children:
      - label: Build
        icon: "$(package)"
        ref: build
      - label: Test
        icon: "$(beaker)"
        ref: test
      - label: Lint
        icon: "$(checklist)"
        ref: lint

  # actions: sequential execution
  - label: CI Pipeline
    icon: "$(rocket)"
    description: Run Lint, Test, Build sequentially
    actions:
      - ref: lint
      - ref: test
      - ref: build
    # continueOnError: continue on error
    # continueOnError: true

  # parallel: parallel execution
  - label: Dev Environment
    icon: "$(split-horizontal)"
    description: Start server and watch in parallel
    parallel:
      - type: terminal
        command: npm run watch
        terminal: watch
        description: Watch for file changes
      - ref: start

  - label: Git
    icon: "$(git-branch)"
    children:
      - label: Basic
        icon: "$(versions)"
        children:
          - label: Status
            icon: "$(info)"
            type: terminal
            command: git status
          - label: Log
            icon: "$(history)"
            type: terminal
            command: git log --oneline -10
      - label: Sync
        icon: "$(sync)"
        children:
          - label: Pull
            icon: "$(cloud-download)"
            type: terminal
            command: git pull
          - label: Push
            icon: "$(cloud-upload)"
            type: terminal
            command: git push

  - label: Editor
    icon: "$(window)"
    children:
      - label: Settings
        icon: "$(gear)"
        type: vscodeCommand
        command: workbench.action.openSettings
      - label: Keyboard Shortcuts
        icon: "$(keyboard)"
        type: vscodeCommand
        command: workbench.action.openGlobalKeybindings
      - label: Extensions
        icon: "$(extensions)"
        type: vscodeCommand
        command: workbench.extensions.action.showInstalledExtensions

  # cwd: working directory (for type: terminal)
  - label: Subproject
    icon: "$(folder)"
    description: Run in subdirectory
    type: terminal
    command: npm install
    cwd: ./packages/subproject

  # Remote actions (advanced)
  - label: Remote
    icon: "$(remote)"
    description: Open remote environments
    children:
      - label: Dev Container
        icon: "$(vm)"
        description: Open project in DevContainer
        type: openInDevContainer
        path: /home/user/my-project
      - label: SSH Server
        icon: "$(remote-explorer)"
        description: Open remote server via SSH
        type: openRemoteSSH
        path: /home/user/project
        host: my-server  # Host name from ~/.ssh/config
      - label: Remote Tunnel
        icon: "$(radio-tower)"
        description: Open remote machine via Remote Tunnel
        type: openRemoteTunnel
        path: /home/user/project
        tunnelName: my-tunnel  # Tunnel name registered with VS Code CLI
